# تقرير مشروع نظام إدارة المستشفيات

## وصف المشروع وأهدافه

يهدف هذا المشروع إلى تصميم وتنفيذ نظام قاعدة بيانات متكامل لإدارة المستشفيات باستخدام Oracle SQL*Plus. يعتبر نظام إدارة المستشفيات من الأنظمة الحيوية التي تساعد في تنظيم وإدارة العمليات اليومية للمستشفى، بدءاً من إدارة بيانات المرضى والأطباء والممرضين، مروراً بإدارة المواعيد والإقامة في المستشفى، وانتهاءً بإدارة الوصفات الطبية والفحوصات المخبرية والفواتير.

### الأهداف الرئيسية للمشروع:

1. تصميم مخطط العلاقات بين الكيانات (ER Diagram) يعكس جميع الكيانات والعلاقات في نظام إدارة المستشفيات.
2. تحويل مخطط ER إلى نموذج علائقي (Relational Schema) مع مراعاة قواعد التطبيع.
3. تنفيذ قاعدة البيانات في Oracle SQL*Plus باستخدام لغة تعريف البيانات (DDL).
4. إدخال بيانات عينة كافية (5 سجلات على الأقل لكل جدول) باستخدام لغة معالجة البيانات (DML).
5. تطوير استعلامات SQL لإنشاء تقارير مهمة للمستشفى.

## قرارات التصميم وتبريرها

### 1. اختيار الكيانات الرئيسية

تم تحديد 14 كياناً رئيسياً في نظام إدارة المستشفيات:

- **المرضى (Patients)**: لتخزين بيانات المرضى الأساسية.
- **الأطباء (Doctors)**: لتخزين بيانات الأطباء ومؤهلاتهم وتخصصاتهم.
- **الممرضون (Nurses)**: لتخزين بيانات الممرضين ومؤهلاتهم.
- **الأقسام (Departments)**: لتنظيم المستشفى إلى أقسام متخصصة.
- **الغرف (Rooms)**: لإدارة غرف المستشفى بأنواعها المختلفة.
- **المواعيد (Appointments)**: لجدولة مواعيد المرضى مع الأطباء.
- **الإقامة في المستشفى (Admissions)**: لتسجيل إقامة المرضى في المستشفى.
- **الأدوية (Medications)**: لإدارة مخزون الأدوية.
- **الوصفات الطبية (Prescriptions)**: لتسجيل الوصفات الطبية للمرضى.
- **تفاصيل الوصفة (PrescriptionDetails)**: لتخزين تفاصيل الأدوية في كل وصفة.
- **الفحوصات المخبرية (LabTests)**: لإدارة أنواع الفحوصات المتاحة.
- **نتائج الفحوصات (TestResults)**: لتسجيل نتائج فحوصات المرضى.
- **الفواتير (Bills)**: لإدارة فواتير المرضى.
- **تفاصيل الفاتورة (BillDetails)**: لتخزين تفاصيل بنود كل فاتورة.

**التبرير**: تم اختيار هذه الكيانات لتغطية جميع جوانب إدارة المستشفى، من الموارد البشرية (الأطباء والممرضين) إلى الموارد المادية (الغرف والأدوية) إلى العمليات (المواعيد والإقامة والفحوصات) إلى الجوانب المالية (الفواتير).

### 2. تصميم العلاقات بين الكيانات

تم تصميم العلاقات بين الكيانات بعناية لتعكس الواقع العملي في المستشفيات:

- **علاقات واحد إلى متعدد (1:N)**: مثل علاقة المرضى بالمواعيد، حيث يمكن لكل مريض أن يكون له عدة مواعيد.
- **علاقات متعددة إلى واحد (N:1)**: مثل علاقة الأطباء بالأقسام، حيث ينتمي كل طبيب إلى قسم واحد.
- **علاقات واحد إلى واحد (1:1)**: مثل علاقة الأقسام برؤساء الأقسام، حيث يكون لكل قسم رئيس واحد.
- **علاقات متعددة إلى متعددة (N:M)**: مثل علاقة الوصفات بالأدوية، حيث يمكن لكل وصفة أن تحتوي على عدة أدوية، وكل دواء يمكن أن يظهر في عدة وصفات.

**التبرير**: تم تصميم هذه العلاقات لتعكس التفاعلات الحقيقية بين مختلف الكيانات في المستشفى، مما يسمح بتتبع سير العمل بشكل دقيق وفعال.

### 3. تطبيق قواعد التطبيع

تم تطبيق قواعد التطبيع حتى الشكل الطبيعي الثالث (3NF) لضمان كفاءة قاعدة البيانات وتقليل التكرار:

- **الشكل الطبيعي الأول (1NF)**: تم التأكد من أن جميع القيم ذرية وغير قابلة للتجزئة.
- **الشكل الطبيعي الثاني (2NF)**: تم التأكد من أن جميع الصفات غير المفتاحية تعتمد بشكل كامل على المفتاح الأساسي.
- **الشكل الطبيعي الثالث (3NF)**: تم التأكد من عدم وجود اعتمادات انتقالية.

**التبرير**: يساعد التطبيع في تقليل التكرار وتحسين سلامة البيانات وتسهيل الصيانة والتحديث.

### 4. استخدام المشغلات (Triggers) والقيود (Constraints)

تم تنفيذ عدة مشغلات وقيود لضمان سلامة البيانات وتنفيذ قواعد العمل:

- **مشغلات لتوليد المفاتيح الأساسية**: لضمان تفرد المفاتيح الأساسية.
- **مشغلات لتحديث حالة الغرف**: لتحديث حالة الغرفة تلقائياً عند إقامة مريض أو خروجه.
- **مشغلات لتحديث مخزون الأدوية**: لتحديث كمية الدواء المتاحة عند صرف وصفة طبية.
- **مشغلات لحساب إجمالي مبلغ الفاتورة**: لحساب إجمالي مبلغ الفاتورة تلقائياً عند إضافة أو تعديل أو حذف بنود الفاتورة.
- **قيود للتحقق من صحة البيانات**: مثل التحقق من أن تاريخ الخروج لا يسبق تاريخ الدخول في جدول الإقامة.

**التبرير**: تساعد المشغلات والقيود في ضمان سلامة البيانات وتنفيذ قواعد العمل تلقائياً، مما يقلل من أخطاء الإدخال ويحسن جودة البيانات.

## لقطات شاشة لقاعدة البيانات ونتائج الاستعلامات

### هيكل قاعدة البيانات

تم تنفيذ قاعدة البيانات باستخدام Oracle SQL*Plus، وتتكون من 14 جدولاً مترابطاً. يمكن رؤية هيكل الجداول في ملف `create_tables.sql`.

### بيانات العينة

تم إدخال بيانات عينة كافية (5 سجلات على الأقل لكل جدول) لاختبار وظائف النظام. يمكن رؤية بيانات العينة في ملف `insert_data.sql`.

### نتائج الاستعلامات

تم تطوير 7 استعلامات SQL لإنشاء تقارير مهمة للمستشفى:

1. **قائمة المرضى مع أطبائهم المعالجين وتواريخ مواعيدهم**: يوضح هذا الاستعلام استخدام الربط (JOIN) بين عدة جداول.
2. **تقرير الإيرادات حسب القسم**: يوضح هذا الاستعلام استخدام الدوال التجميعية (SUM) والتجميع (GROUP BY).
3. **تقرير استخدام الأدوية**: يوضح هذا الاستعلام استخدام الاستعلامات الفرعية (Subqueries).
4. **تقرير معدل إشغال الغرف**: يوضح هذا الاستعلام استخدام الدوال التجميعية والتجميع والترتيب.
5. **تقرير أداء الأطباء**: يوضح هذا الاستعلام استخدام الربط المتعدد والدوال التجميعية والتجميع.
6. **تقرير المرضى الأكثر زيارة للمستشفى**: يوضح هذا الاستعلام استخدام الدوال التجميعية والتجميع والترتيب.
7. **تقرير الفواتير غير المدفوعة**: يوضح هذا الاستعلام استخدام الربط والتصفية.

يمكن رؤية هذه الاستعلامات في ملف `report_queries.sql`.

## التحديات والدروس المستفادة

### التحديات:

1. **تصميم العلاقات المعقدة**: كان تصميم العلاقات بين الكيانات المختلفة تحدياً، خاصة في حالة العلاقات متعددة إلى متعددة.
2. **ضمان سلامة البيانات**: كان ضمان سلامة البيانات وتنفيذ قواعد العمل تحدياً، خاصة مع وجود العديد من القيود والعلاقات.
3. **تطوير استعلامات معقدة**: كان تطوير استعلامات SQL معقدة لإنشاء تقارير شاملة تحدياً، خاصة عند الحاجة إلى الربط بين عدة جداول واستخدام الدوال التجميعية والاستعلامات الفرعية.

### الدروس المستفادة:

1. **أهمية التخطيط الجيد**: أظهر المشروع أهمية التخطيط الجيد وتحليل المتطلبات قبل البدء في التنفيذ.
2. **فوائد التطبيع**: أظهر المشروع فوائد تطبيق قواعد التطبيع في تقليل التكرار وتحسين سلامة البيانات.
3. **قوة المشغلات والقيود**: أظهر المشروع قوة استخدام المشغلات والقيود في تنفيذ قواعد العمل وضمان سلامة البيانات.
4. **مرونة SQL**: أظهر المشروع مرونة لغة SQL في تطوير استعلامات معقدة لاستخراج معلومات قيمة من قاعدة البيانات.

## الخلاصة

تم تصميم وتنفيذ نظام قاعدة بيانات متكامل لإدارة المستشفيات باستخدام Oracle SQL*Plus. يغطي النظام جميع جوانب إدارة المستشفى، من إدارة المرضى والأطباء والممرضين إلى إدارة المواعيد والإقامة والوصفات الطبية والفحوصات والفواتير.

تم تطبيق مبادئ تصميم قواعد البيانات الجيدة، بما في ذلك تطبيق قواعد التطبيع واستخدام المشغلات والقيود لضمان سلامة البيانات وتنفيذ قواعد العمل.

تم تطوير استعلامات SQL لإنشاء تقارير مهمة للمستشفى، مما يساعد في اتخاذ القرارات وتحسين الأداء.

يمكن تطوير النظام مستقبلاً ليشمل المزيد من الوظائف، مثل إدارة الموارد البشرية وإدارة المخزون وإدارة الجدول الزمني للأطباء والممرضين.
